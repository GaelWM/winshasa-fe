<div class="w-full max-w-3xl" *ngIf="user() as user">
    <form
        *ngIf="accountForm() as accountForm"
        #accountNgForm="ngForm"
        (ngSubmit)="onSubmitForm(accountNgForm)"
        [formGroup]="accountForm"
    >
        <div class="w-full">
            <div class="text-secondary">
                Following information is publicly displayed within the system
            </div>
        </div>
        <fuse-alert [type]="alert.type" *ngIf="showAlert" class="w-full">
            <span fuseAlertTitle>{{ alert.title }}</span>
            {{ alert.message }}
        </fuse-alert>
        <div class="grid sm:grid-cols-4 gap-6 w-full mt-8">
            <div
                class="sm:col-span-2 flex flex-col gap-1 justify-center items-center"
            >
                <div class="rounded-full">
                    <img
                        *ngIf="user?.avatar"
                        class="w-32 h-32 rounded-full ring-4 ring-bg-card"
                        [src]="user?.avatar"
                        alt="User avatar"
                    />
                    <mat-icon
                        *ngIf="!user?.avatar"
                        class="w-32 h-32 rounded-full ring-4 ring-bg-card"
                        [svgIcon]="'heroicons_solid:user'"
                    ></mat-icon>
                </div>
                <app-file-upload
                    [url]="'user/' + user.id + '/update-profile'"
                    [fileAttribute]="'profile_pic'"
                    [requiredFileTypes]="[
                        'image/png',
                        'image/jpg',
                        'image/jpeg'
                    ]"
                    (uploaded)="onImageUploaded($event)"
                ></app-file-upload>
            </div>
            <!-- Name -->
            <div class="sm:col-span-2">
                <mat-form-field
                    class="fuse-mat-no-subscript fuse-mat-emphasized-affix w-full"
                >
                    <mat-label>First name</mat-label>
                    <mat-icon
                        class="icon-size-5"
                        [svgIcon]="'heroicons_solid:user'"
                        matPrefix
                    ></mat-icon>
                    <input [formControlName]="'firstName'" matInput />
                </mat-form-field>
                <mat-error
                    *ngIf="
                        accountForm.controls.firstName.touched &&
                        accountForm.controls.firstName.invalid
                    "
                >
                    <span *ngIf="accountForm.controls.firstName.errors.required"
                        >First name is required</span
                    >
                </mat-error>
                <mat-form-field
                    class="fuse-mat-no-subscript fuse-mat-emphasized-affix w-full"
                >
                    <mat-label>Last Name</mat-label>
                    <mat-icon
                        class="icon-size-5"
                        [svgIcon]="'heroicons_solid:user'"
                        matPrefix
                    ></mat-icon>
                    <input [formControlName]="'lastName'" matInput />
                </mat-form-field>
                <mat-error
                    *ngIf="
                        accountForm.controls.lastName.touched &&
                        accountForm.controls.lastName.invalid
                    "
                >
                    <span *ngIf="accountForm.controls.lastName.errors.required"
                        >Last name is required</span
                    >
                </mat-error>
                <mat-form-field
                    class="fuse-mat-no-subscript fuse-mat-emphasized-affix w-full mt-2"
                >
                    <mat-label>Email</mat-label>
                    <mat-icon
                        class="icon-size-5"
                        [svgIcon]="'heroicons_solid:envelope'"
                        matPrefix
                    ></mat-icon>
                    <input [formControlName]="'email'" matInput />
                </mat-form-field>
                <mat-error
                    *ngIf="
                        accountForm.controls.email.touched &&
                        accountForm.controls.email.invalid
                    "
                >
                    <span *ngIf="accountForm.controls.email.errors.required"
                        >Email is required</span
                    >
                    <span *ngIf="accountForm.controls.email.errors.email"
                        >Email is incorrect</span
                    >
                </mat-error>
            </div>
        </div>

        <!-- Divider -->
        <div class="my-10 border-t"></div>

        <!-- Section -->
        <div class="w-full">
            <div class="text-xl">Layout Settings</div>
            <div class="text-secondary">
                Choose your application layout setup & coloring.
            </div>
        </div>
        <div class="grid sm:grid-cols-4 gap-6 w-full mt-8">
            <settings></settings>
        </div>
    </form>
</div>
